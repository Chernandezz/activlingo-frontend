<!-- dictionary-sidebar.component.html -->
<div class="h-full flex flex-col bg-white border-r border-gray-200">
  <!-- Header -->
  <div class="p-4 border-b border-gray-200">
    <h2 class="text-lg font-semibold text-gray-800">Mi Diccionario</h2>
  </div>

  <!-- Controles -->
  <div class="p-4 space-y-4 border-b border-gray-200">
    <!-- Botón de búsqueda -->
    <button (click)="startSearch.emit()" class="w-full btn btn-primary" [disabled]="loading">
      <fa-icon [icon]="icons.plus" class="mr-2"></fa-icon>
      Nueva Palabra
    </button>

    <!-- Filtros -->
    <div class="rounded-md shadow-sm">
      <button type="button" (click)="onFilterSelect('all')" [class]="{
              'bg-blue-600 text-white': selectedFilter() === 'active',
              'bg-gray-100 text-gray-700 hover:bg-gray-50': selectedFilter() !== 'active'
            }" class="py-2 px-3 text-sm font-medium rounded-l-md border border-gray-300 w-full">
        Todas ({{ totalWords() }})
      </button>
      <div>
        
        <button type="button" (click)="onFilterSelect('active')" [class]="{
                  'bg-blue-600 text-white': selectedFilter() === 'active',
                  'bg-gray-100 text-gray-700 hover:bg-gray-50': selectedFilter() !== 'active'
                }" class="flex-1 py-2 px-3 text-sm font-medium rounded-l-md border border-gray-300">
          Activas ({{ activeCount }})
        </button>
        <button type="button" (click)="onFilterSelect('passive')" [class]="{
                  'bg-blue-600 text-white': selectedFilter() === 'passive',
                  'bg-gray-100 text-gray-700 hover:bg-gray-50': selectedFilter() !== 'passive'
                }" class="flex-2 py-2 px-3 text-sm font-medium rounded-r-md border border-gray-300">
          Pasivas ({{ passiveCount }})
        </button>
      </div>
      
    </div>

    <!-- Buscador -->
    <div class="relative">
      <div class="absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none">
        <fa-icon [icon]="icons.search" class="text-gray-400"></fa-icon>
      </div>
      <input type="text" [(ngModel)]="searchTerm" placeholder="Buscar palabra..."
        class="block w-full pl-10 pr-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-blue-500 focus:border-blue-500 sm:text-sm"
        [disabled]="loading">
    </div>
  </div>

  <!-- Lista de palabras -->
  <div class="flex-1 overflow-y-auto">
    @if (loading) {
    <div class="flex justify-center items-center h-full">
      <fa-icon [icon]="icons.spinner" spin class="text-blue-500 text-2xl"></fa-icon>
    </div>
    } @else {
    @if (filteredWords().length > 0) {
    <ul class="divide-y divide-gray-200">
      @for (word of filteredWords(); track trackByWordId($index, word)) {
      <li (click)="onSelect(word)" class="px-4 py-3 hover:bg-gray-50 cursor-pointer transition-colors">
        <div class="flex items-center justify-between">
          <span class="text-sm font-medium text-gray-900 capitalize">{{ word.word }}</span>
          <span [class]="{
                    'bg-green-100 text-green-800': word.status === 'active',
                    'bg-yellow-100 text-yellow-800': word.status === 'passive'
                  }" class="px-2 py-0.5 text-xs font-medium rounded-full">
            {{ word.status === 'active' ? 'Activa' : 'Pasiva' }}
          </span>
        </div>
        <p class="mt-1 text-xs text-gray-500 truncate">{{ word.meaning }}</p>
      </li>
      }
    </ul>
    } @else {
    <div class="p-4 text-center text-gray-500">
      @if (searchTerm()) {
      <p>No se encontraron palabras que coincidan con "{{ searchTerm() }}"</p>
      } @else {
      <p>No hay palabras {{ selectedFilter() === 'active' ? 'activas' : 'pasivas' }}</p>
      }
    </div>
    }
    }
  </div>
</div>