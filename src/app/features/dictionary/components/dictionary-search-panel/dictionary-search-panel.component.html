<div class="bg-white rounded-xl shadow-xl p-6 max-w-3xl mx-auto h-full md:h-auto md:my-8">
  <!-- Header -->
  <div class="flex justify-between items-center mb-6">
    <h2 class="text-xl font-semibold text-gray-800">Agregar Nueva Palabra</h2>
    <button (click)="closeSearch()" class="btn btn-ghost btn-circle btn-sm">
      <fa-icon [icon]="icons.close"></fa-icon>
    </button>
  </div>

  <!-- Search Input -->
  <div class="relative mb-6">
    <div class="absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none">
      <fa-icon [icon]="icons.search" class="text-gray-400"></fa-icon>
    </div>
    <input type="text" [(ngModel)]="searchTerm" (keyup.enter)="searchWord()"
      placeholder="Escribe una palabra para buscar..."
      class="w-full pl-10 pr-24 py-3 border border-gray-300 rounded-lg shadow-sm focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500">
    <button (click)="searchWord()" [disabled]="!searchTerm() || loading()"
      class="absolute right-2 top-2 btn btn-primary btn-sm gap-2">
      <span class="hidden sm:inline">Buscar</span>
      <fa-icon [icon]="icons.search"></fa-icon>
    </button>
  </div>

  <!-- Results -->
  @if (loading()) {
  <div class="flex flex-col items-center justify-center py-12">
    <fa-icon [icon]="icons.spinner" spin class="text-blue-500 text-3xl mb-4"></fa-icon>
    <p class="text-gray-500">Buscando definiciones...</p>
  </div>
  } @else {
  @if (searchPerformed() && results().length === 0) {
  <div class="text-center py-12">
    <div class="w-20 h-20 bg-gray-100 rounded-full flex items-center justify-center mx-auto mb-4">
      <fa-icon [icon]="icons.search" class="text-gray-400 text-2xl"></fa-icon>
    </div>
    <h3 class="text-lg font-medium text-gray-700 mb-2">No se encontraron resultados</h3>
    <p class="text-gray-500">No hay definiciones para "{{ searchTerm() }}"</p>
  </div>
  } @else {
  <div class="space-y-4 max-h-[calc(100vh-250px)] overflow-y-auto pr-2">
    @for (def of results(); track trackByMeaning($index, def)) {
    <div class="p-4 border border-gray-200 rounded-lg hover:shadow-md transition-shadow bg-white">
      <div class="flex justify-between items-start gap-4">
        <div class="flex-1">
          <h3 class="font-medium text-gray-800">{{ def.meaning }}</h3>
          @if (def.example) {
          <p class="mt-2 text-sm text-gray-600 italic">"{{ def.example }}"</p>
          }
          <div class="mt-3 flex flex-wrap gap-2">
            <span class="badge badge-info">
              {{ def.part_of_speech }}
            </span>
            @if (def.is_idiomatic) {
            <span class="badge badge-warning">Idiom√°tico</span>
            }
            <span class="badge">Formal</span>
          </div>
        </div>
        <button (click)="addDefinitionToDictionary(def)" [disabled]="def.added" class="btn btn-sm gap-2 min-w-[100px]"
          [ngClass]="{
                'btn-success': !def.added,
                'btn-disabled': def.added
              }">
          @if (def.added) {
          <fa-icon [icon]="icons.added"></fa-icon>
          <span class="hidden sm:inline">Agregada</span>
          } @else {
          <fa-icon [icon]="icons.add"></fa-icon>
          <span class="hidden sm:inline">Agregar</span>
          }
        </button>
      </div>
    </div>
    }
  </div>
  }
  }
</div>